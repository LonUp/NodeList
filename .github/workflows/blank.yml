#-------------------------------------------------------------#
# Telegram Channel:@LONUP_M
#-------------------------------------------------------------#
mixed-port: 6985
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
cfw-latency-timeout: 7000
cfw-latency-url: http://www.google-analytics.com/generate_204
cfw-proxies-order: latency
experimental:
  ignore-resolve-fail: true
ipv6: true
dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  nameserver:
    - https://basic.rethinkdns.com/dns-query
    - https://NoTMIKE.dev/dns.php
    - tls://one.one.one.one:853
    - tls://dns.google:853
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.adguard.com/dns-query
    - https://doh-de.blahdns.com/dns-query
    - https://dns.adguard-dns.com/dns-query
    - https://1.1.1.1/dns-query
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://basic.rethinkdns.com/dns-query
    - https://azure.cloudflare-dns.com/dns-query
    - https://dns64.cloudflare-dns.com/dns-query
    - https://dns1.ryan-palmer.com/dns-query
    - https://odvr.nic.cz/dns-query
    - https://doh.crypto.sx/dns-query
    - https://puredns.org/dns-query
    - https://dns.dnshome.de/dns-query
    - https://doh.seby.io:8443/dns-query
    - https://ibksturm.synology.me/dns-query
    - https://dns.hostux.net/dns-query
    - https://doh.libredns.gr/dns-query
    - https://NoTMIKE.dev/dns.php
    - https://doh.42l.fr/dns-query
    - https://DNS.HeN.ee/dns-query
    - https://doh.dnswarden.com/uncensored
    - tls://one.one.one.one:853
    - tls://dns.google:853
    - https://dns.google/dns-query
    - https://dns64.dns.google/dns-query
    - https://8888.google/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.quad9.net/dns-query
    - https://mozilla.cloudflare-dns.com/dns-query
    - https://EU2.DNS.LAVATE.CH/dns-query
    - https://DANDELIONSPROUT.Asuscomm.com:2501/dns-query
    - https://dns.switch.ch/dns-query
    - https://dnsforge.de/dns-query
    - https://dns.adguard.com/dns-query
    - https://doh-de.blahdns.com/dns-query
    - https://doh.dns.sb/dns-query
    - https://dns.cloudflare.com/dns-query
    - https://dns.twnic.tw/dns-query
fallback-filter:
    geoip: true
    geoip-code: IR
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 127.0.0.1/32
    domain:
      - +.google.com
      - +.facebook.com
      - +.youtube.com
      - +.gvt1.com
      - '+.facebook.com'
      - '+.twitter.com'
      - '+.youtube.com'
      - '+.bing.com'
fake-ip-filter:
    - "*.lan"
    - stun.*.*.*
    - stun.*.*
    - time.windows.com
    - time.nist.gov
    - time.apple.com
    - time.asia.apple.com
    - "*.openwrt.pool.ntp.org"
    - pool.ntp.org
    - ntp.ubuntu.com
    - time1.apple.com
    - time2.apple.com
    - time3.apple.com
    - time4.apple.com
    - time5.apple.com
    - time6.apple.com
    - time7.apple.com
    - time1.google.com
    - time2.google.com
    - time3.google.com
    - time4.google.com
    - api.joox.com
    - joox.com
    - "*.xiami.com"
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - "*.*.stun.playstation.net"
    - xbox.*.*.microsoft.com
    - "*.ipv6.microsoft.com"
    - speedtest.cros.wr.pvp.net
    - 'dns.msftncsi.com'
    - 'www.msftncsi.com'
    - 'www.msftconnecttest.com'
proxies:
  - {"name":"·èû·ù™·ëé·ëå·ë≠ ñ°∫","type":"ss","server":"134.195.196.143","port":805,"password":"G!yBwPWH3Vao","cipher":"chacha20-ietf-poly1305"}
proxy-groups:
  - name: üåêALL ‚ü™@LonUp_M‚ü´
    type: select
    proxies:
      - ‚öìDirect
      - ‚õîBLOCK
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üëëTestGroups
    type: select
    proxies:
      - ‚ö°test‚ä∂1
      - ‚ö°test‚ä∂2
      - ‚ö°test‚ä∂3
      - ‚ö°test‚ä∂4
      - üîπfallback‚óà1
      - üîπfallback‚óà2
      - üîπfallback‚óà3
      - üîπfallback‚óà4
      - üß†load-balance‚áã1
      - üß†load-balance‚áã2
      - üß†load-balance‚áã3
      - üß†load-balance‚áã4
      - üí¶relay
  - name: üí¶relay
    type: relay
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: ‚ö°test‚ä∂1
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 800
    tolerance: 300
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: ‚ö°test‚ä∂2
    type: url-test
    url: 'http://cp.cloudflare.com/'
    interval: 800
    tolerance: 300
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: ‚ö°test‚ä∂3
    type: url-test
    url: 'http://captive.apple.com'
    interval: 800
    tolerance: 300
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: ‚ö°test‚ä∂4
    type: url-test
    url: 'http://detectportal.firefox.com/success.txt'
    interval: 800
    tolerance: 300
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üîπfallback‚óà1
    type: fallback
    url: 'http://www.google-analytics.com/generate_204'
    interval: 700
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üîπfallback‚óà2
    type: fallback
    url: 'http://cp.cloudflare.com/generate_204'
    interval: 700
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üîπfallback‚óà3
    type: fallback
    url: 'http://www.apple.com/library/test/success.html'
    interval: 700
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üîπfallback‚óà4
    type: fallback
    url: 'http://connect.rom.miui.com/generate_204'
    interval: 700
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üß†load-balance‚áã1
    type: load-balance
    url: 'http://www.google.com/generate_204'
    interval: 666
    strategy: round-robin
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üß†load-balance‚áã2
    type: load-balance
    url: 'https://raw.githubusercontent.com/LonUp/NodeList/main/URL_TEST.yaml'
    interval: 666
    strategy: consistent-hashing
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üß†load-balance‚áã3
    type: load-balance
    url: 'http://www.msftconnecttest.com/connecttest.txt'
    interval: 666
    strategy: round-robin
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: üß†load-balance‚áã4
    type: load-balance
    url: 'http://www.qualcomm.cn/generate_204'
    interval: 666
    strategy: consistent-hashing
    proxies:
      - ·èû·ù™·ëé·ëå·ë≠ ñ°∫
  - name: ‚öìDirect
    type: select
    proxies:
      - DIRECT
  - name: ‚õîBLOCK
    type: select
    proxies:
      - REJECT

rule-providers:

iran:
    type: http
    behavior: classical
    url: "https://github.com/bootmortis/iran-hosted-domains/releases/latest/download/clash_rules.yaml"
    path: ./ruleset/iran.yaml
    interval: 900000
  
  AntiAd:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml"
    path: ./ruleset/AntiAd.yaml
    interval: 900000

rules:
  - GEOIP,IR,DIRECT
  - DOMAIN-SUFFIX,ir,DIRECT
  - MATCH ,‚ö°test‚ä∂1, ‚ö°test‚ä∂2, ‚ö°test‚ä∂3, ‚ö°test‚ä∂4, üß†load-balance‚áã1, üß†load-balance‚áã2, üß†load-balance‚áã3, üß†load-balance‚áã4, üîπfallback‚óà1, üîπfallback‚óà2, üîπfallback‚óà3, üîπfallback‚óà4,
  - RULE-SET,iran,DIRECT
  - RULE-SET,AntiAd,REJECT
  - GEOIP,LAN,DIRECT
  - DOMAIN-KEYWORD,admarvel,REJECT
  - DOMAIN-KEYWORD,admaster,REJECT
  - DOMAIN-KEYWORD,adsage,REJECT
  - DOMAIN-KEYWORD,adsmogo,REJECT
  - DOMAIN-KEYWORD,adsrvmedia,REJECT
  - DOMAIN-KEYWORD,adwords,REJECT
  - DOMAIN-KEYWORD,adservice,REJECT
  - DOMAIN-KEYWORD,crashlytics,REJECT
  - DOMAIN-KEYWORD,domob,REJECT
  - DOMAIN-KEYWORD,duomeng,REJECT
  - DOMAIN-KEYWORD,dwtrack,REJECT
  - DOMAIN-KEYWORD,guanggao,REJECT
  - DOMAIN-KEYWORD,lianmeng,REJECT
  - DOMAIN-KEYWORD,dnserror,REJECT
  - DOMAIN-KEYWORD,omgmta,REJECT
  - DOMAIN-KEYWORD,openx,REJECT
  - DOMAIN-KEYWORD,partnerad,REJECT
  - DOMAIN-KEYWORD,pingfore,REJECT
  - DOMAIN-KEYWORD,supersonicads,REJECT
  - DOMAIN-KEYWORD,uedas,REJECT
  - DOMAIN-KEYWORD,umeng,REJECT
  - DOMAIN-KEYWORD,usage,REJECT
  - DOMAIN-KEYWORD,wlmonitor,REJECT
  - DOMAIN-KEYWORD,zjtoolbar,REJECT
  - DOMAIN-KEYWORD,51yes,REJECT
  - DOMAIN-KEYWORD,acs86,REJECT
  - DOMAIN-KEYWORD,adashx,REJECT
  - DOMAIN-KEYWORD,adcome,REJECT
  - DOMAIN-KEYWORD,adinfuse,REJECT
  - DOMAIN-KEYWORD,admarvel,REJECT
  - DOMAIN-KEYWORD,admaster,REJECT
  - DOMAIN-KEYWORD,admdfs,REJECT
  - DOMAIN-KEYWORD,admob,REJECT
  - DOMAIN-KEYWORD,adnewnc,REJECT
  - DOMAIN-KEYWORD,adsage,REJECT
  - DOMAIN-KEYWORD,adsame,REJECT
  - DOMAIN-KEYWORD,adservice,REJECT
  - DOMAIN-KEYWORD,adsmind,REJECT
  - DOMAIN-KEYWORD,adsmogo,REJECT
  - DOMAIN-KEYWORD,adsrvmedia,REJECT
  - DOMAIN-KEYWORD,adsserving,REJECT
  - DOMAIN-KEYWORD,advert,REJECT
  - DOMAIN-KEYWORD,adview,REJECT
  - DOMAIN-KEYWORD,adwhirl,REJECT
  - DOMAIN-KEYWORD,adwords,REJECT
  - DOMAIN-KEYWORD,allyes,REJECT
  - DOMAIN-KEYWORD,analysis,REJECT
  - DOMAIN-KEYWORD,-analytics,REJECT
  - DOMAIN-KEYWORD,appads,REJECT
  - DOMAIN-KEYWORD,appadhoc,REJECT
  - DOMAIN-KEYWORD,applovin,REJECT
  - DOMAIN-KEYWORD,apptimize,REJECT
  - DOMAIN-KEYWORD,baichuan,REJECT
  - DOMAIN-KEYWORD,cnzz,REJECT
  - DOMAIN-KEYWORD,crashlytics,REJECT
  - DOMAIN-KEYWORD,dnserror,REJECT
  - DOMAIN-KEYWORD,domob,REJECT
  - DOMAIN-KEYWORD,doubleclick,REJECT
  - DOMAIN-KEYWORD,duomeng,REJECT
  - DOMAIN-KEYWORD,dwtrack,REJECT
  - DOMAIN-KEYWORD,emarbox,REJECT
  - DOMAIN-KEYWORD,flurry,REJECT
  - DOMAIN-KEYWORD,guanggao,REJECT
  - DOMAIN-KEYWORD,guomob,REJECT
  - DOMAIN-KEYWORD,growingio,REJECT
  - DOMAIN-KEYWORD,iad,REJECT
  - DOMAIN-KEYWORD,intercom,REJECT
  - DOMAIN-KEYWORD,inmobi,REJECT
  - DOMAIN-KEYWORD,lianmeng,REJECT
  - DOMAIN-KEYWORD,loggly,REJECT
  - DOMAIN-KEYWORD,metrics,REJECT
  - DOMAIN-KEYWORD,mobaders,REJECT
  - DOMAIN-KEYWORD,mobclix,REJECT
  - DOMAIN-KEYWORD,networkbench,REJECT
  - DOMAIN-KEYWORD,omgmta,REJECT
  - DOMAIN-KEYWORD,openx,REJECT
  - DOMAIN-KEYWORD,partnerad,REJECT
  - DOMAIN-KEYWORD,pingfore,REJECT
  - DOMAIN-KEYWORD,safebrowsing,REJECT
  - DOMAIN-KEYWORD,sensor,REJECT
  - DOMAIN-KEYWORD,shence,REJECT
  - DOMAIN-KEYWORD,shujupie,REJECT
  - DOMAIN-KEYWORD,smartadserver,REJECT
  - DOMAIN-KEYWORD,socdm,REJECT
  - DOMAIN-KEYWORD,supersonicads,REJECT
  - DOMAIN-KEYWORD,taboola,REJECT
  - DOMAIN-KEYWORD,tanx,REJECT
  - DOMAIN-KEYWORD,tapjoyads,REJECT
  - DOMAIN-KEYWORD,telemetry,REJECT
  - DOMAIN-KEYWORD,tingyun,REJECT
  - DOMAIN-KEYWORD,uedas,REJECT
  - DOMAIN-KEYWORD,umeng,REJECT
  - DOMAIN-KEYWORD,umtrack,REJECT
  - DOMAIN-KEYWORD,unidesk,REJECT
  - DOMAIN-KEYWORD,usage,REJECT
  - DOMAIN-KEYWORD,wlmonitor,REJECT
  - DOMAIN-KEYWORD,whalecloud,REJECT
  - DOMAIN-KEYWORD,zjtoolbar,REJECT
